Develop a machine learning model to automatically detect diabetic retinopathy from retina images, predicting severity on a 0-4 scale (0: No DR, 1: Mild, 2: Moderate, 3: Severe, 4: Proliferative DR). 

Use the APTOS 2019 Kaggle dataset (train.csv for training; test.csv for testing) with noisy fundus photography images from varied conditions. 

Try to use the Synthetic Minority Over-sampling Technique  (SMOTE)  algorithm. Recommend the best-performing model and configuration, considering the dataset's class imbalance.